<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ø¯ÛŒØ±ÛŒØª Ø§Ù‚Ø³Ø§Ø· - Ø¢Ø±ÛŒÙˆ Ù…Ù‚ØªØ¯Ø±</title>
    <style>
        * {margin:0; padding:0; box-sizing:border-box; font-family:'Vazir', Tahoma, sans-serif;}
        body {background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: #333; min-height:100vh; padding:20px; direction:rtl;}
        .container {max-width:1000px; margin:0 auto;}
        header {text-align:center; margin-bottom:30px; color:white; text-shadow:0 2px 5px rgba(0,0,0,0.3);}
        h1 {font-size:2.5rem; margin-bottom:10px;}
        .creator {font-size:1rem; opacity:0.9; margin-top:10px;}
        .main-card {background:white; border-radius:20px; padding:30px; box-shadow:0 15px 35px rgba(0,0,0,0.2); margin-bottom:20px;}
        .add-installment-form {display:grid; grid-template-columns:2fr 1fr 1fr 1fr auto; gap:12px; margin-bottom:30px; padding:25px; background:#f8f9fa; border-radius:15px;}
        @media (max-width:768px){.add-installment-form{grid-template-columns:1fr;}}
        .form-input {padding:12px 15px; border:2px solid #e9ecef; border-radius:10px; font-size:14px; transition:all 0.3s;}
        .form-input:focus {outline:none; border-color:#4c6ef5; box-shadow:0 0 0 3px rgba(76,110,245,0.1);}
        .add-btn {background:#40c057; color:white; border:none; border-radius:10px; padding:12px 20px; cursor:pointer; font-weight:bold; font-size:14px; transition:all 0.3s; white-space:nowrap;}
        .add-btn:hover {background:#2f9e44; transform:translateY(-2px);}
        .installments-container {display:grid; grid-template-columns:repeat(auto-fit, minmax(350px, 1fr)); gap:20px; margin-top:20px;}
        .loan-card {background:white; border-radius:15px; padding:20px; border-left:5px solid #4c6ef5; box-shadow:0 5px 15px rgba(0,0,0,0.1); transition:all 0.3s;}
        .loan-card:hover {transform:translateY(-3px); box-shadow:0 8px 25px rgba(0,0,0,0.15);}
        .loan-header {display:flex; justify-content:space-between; align-items:center; margin-bottom:15px; padding-bottom:10px; border-bottom:2px solid #f8f9fa;}
        .loan-title {font-size:18px; font-weight:bold; color:#2c3e50;}
        .loan-amount {font-size:20px; font-weight:bold; color:#e03131; direction:ltr; text-align:left;}
        .loan-details {display:grid; grid-template-columns:1fr 1fr; gap:10px; margin-bottom:15px;}
        .detail-item {background:#f8f9fa; padding:10px; border-radius:8px; text-align:center;}
        .detail-label {font-size:11px; color:#6c757d; margin-bottom:5px;}
        .detail-value {font-size:14px; font-weight:bold; color:#495057;}
        .installments-list {margin-top:15px;}
        .installment-row {display:grid; grid-template-columns:1fr 1fr auto; gap:10px; padding:10px; margin-bottom:8px; background:#f8f9fa; border-radius:8px; align-items:center; transition:all 0.3s;}
        .installment-row.upcoming {background:#fff3cd; border-right:3px solid #ffc107;}
        .installment-row.overdue {background:#ffe3e3; border-right:3px solid #fa5252;}
        .installment-row.paid {background:#d3f9d8; border-right:3px solid #40c057; opacity:0.8;}
        .installment-date {font-size:13px; font-weight:500;}
        .installment-amount {font-size:14px; font-weight:bold; color:#495057; direction:ltr; text-align:left;}
        .payment-buttons {display:flex; gap:5px;}
        .pay-btn {padding:6px 12px; border:none; border-radius:6px; cursor:pointer; font-size:11px; font-weight:bold; transition:all 0.3s;}
        .pay-btn.paid {background:#40c057; color:white;}
        .pay-btn.unpaid {background:#fa5252; color:white;}
        .pay-btn:hover {transform:scale(1.05);}
        .pay-btn:disabled {opacity:0.6; cursor:not-allowed; transform:none;}
        .loan-actions {display:flex; justify-content:space-between; align-items:center; margin-top:15px; padding-top:10px; border-top:2px solid #f8f9fa;}
        .delete-btn {background:#fa5252; color:white; border:none; border-radius:6px; padding:8px 15px; cursor:pointer; font-size:12px; transition:all 0.3s;}
        .delete-btn:hover {background:#e03131; transform:scale(1.05);}
        .loan-status {font-size:12px; font-weight:bold; padding:5px 10px; border-radius:15px;}
        .status-active {background:#fff3cd; color:#856404;}
        .status-completed {background:#d3f9d8; color:#0f5132;}
        .empty-state {text-align:center; padding:60px 20px; color:#6c757d; grid-column:1 / -1;}
        .empty-state i {font-size:80px; margin-bottom:20px; display:block; color:#adb5bd;}
        .stats {display:grid; grid-template-columns:repeat(auto-fit, minmax(200px,1fr)); gap:15px; margin-top:30px;}
        .stat-card {background:white; padding:20px; border-radius:12px; text-align:center; box-shadow:0 5px 15px rgba(0,0,0,0.1);}
        .stat-value {font-size:1.8rem; font-weight:bold; color:#4c6ef5; margin-bottom:5px;}
        .stat-label {color:#6c757d; font-size:14px;}
        .notification {position:fixed; top:20px; left:50%; transform:translateX(-50%); background:#40c057; color:white; padding:15px 25px; border-radius:10px; box-shadow:0 5px 15px rgba(0,0,0,0.2); z-index:1000; display:none;}
        .section-title {font-size:1.5rem; color:#2c3e50; margin-bottom:20px; padding-bottom:10px; border-bottom:2px solid #f8f9fa;}
        .data-management {display:grid; grid-template-columns:1fr 1fr 1fr 1fr; gap:15px; margin-top:20px; padding:20px; background:#f8f9fa; border-radius:15px;}
        .data-btn {padding:12px 20px; border:none; border-radius:10px; cursor:pointer; font-weight:bold; font-size:14px; transition:all 0.3s;}
        .export-btn {background:#4c6ef5; color:white;}
        .import-btn {background:#ff922b; color:white;}
        .clear-btn {background:#fa5252; color:white;}
        .data-btn:hover {transform:translateY(-2px); opacity:0.9;}
        .file-input {display:none;}
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ’³ Ù…Ø¯ÛŒØ±ÛŒØª Ø§Ù‚Ø³Ø§Ø·</h1>
            <p class="creator">Ø¨Ø±Ù†Ø§Ù…Ù‡ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ Ù…Ø¯ÛŒØ±ÛŒØª ÙˆØ§Ù…â€ŒÙ‡Ø§ - Ø·Ø±Ø§Ø­ÛŒ Ø´Ø¯Ù‡ ØªÙˆØ³Ø· Ø¢Ø±ÛŒÙˆ Ù…Ù‚ØªØ¯Ø±</p>
        </header>
        
        <div class="main-card">
            <h3 class="section-title">â• Ø§ÙØ²ÙˆØ¯Ù† ÙˆØ§Ù… Ø¬Ø¯ÛŒØ¯</h3>
            <div class="add-installment-form">
                <input type="text" class="form-input" id="installmentName" placeholder="Ù†Ø§Ù… ÙˆØ§Ù…" required>
                <input type="text" class="form-input" id="installmentMonthly" placeholder="Ù‚Ø³Ø· Ù…Ø§Ù‡ÛŒØ§Ù†Ù‡ (ØªÙˆÙ…Ø§Ù†)" required>
                <input type="number" class="form-input" id="installmentDay" placeholder="Ø±ÙˆØ² Ø³Ø±Ø±Ø³ÛŒØ¯ (Û±-Û³Û±)" min="1" max="31" required>
                <input type="number" class="form-input" id="installmentMonths" placeholder="Ù…Ø§Ù‡â€ŒÙ‡Ø§ÛŒ Ù…Ø§Ù†Ø¯Ù‡" min="1" max="120" required>
                <button class="add-btn" onclick="addInstallment()">â• Ø§ÙØ²ÙˆØ¯Ù† ÙˆØ§Ù…</button>
            </div>
            
            <h3 class="section-title">ğŸ“‹ Ù„ÛŒØ³Øª ÙˆØ§Ù…â€ŒÙ‡Ø§</h3>
            <div class="installments-container" id="installmentsContainer"></div>

            <h3 class="section-title">ğŸ’¾ Ù…Ø¯ÛŒØ±ÛŒØª Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§</h3>
            <div class="data-management">
                <button class="data-btn export-btn" onclick="exportData()">ğŸ“¥ Ø®Ø±ÙˆØ¬ÛŒ Ú¯Ø±ÙØªÙ†</button>
                <button class="data-btn import-btn" onclick="document.getElementById('importFile').click()">ğŸ“¤ ÙˆØ§Ø±Ø¯ Ú©Ø±Ø¯Ù†</button>
                <button class="data-btn clear-btn" onclick="clearAllData()">ğŸ—‘ï¸ Ø­Ø°Ù Ù‡Ù…Ù‡ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§</button>
                <button class="data-btn" style="background:#228be6; color:white;" onclick="testNotification()">ğŸ”” ØªØ³Øª Ù†ÙˆØªÛŒÙÛŒÚ©ÛŒØ´Ù†</button>
                <input type="file" id="importFile" class="file-input" accept=".json" onchange="importData(event)">
            </div>
            
            <div class="stats">
                <div class="stat-card"><div class="stat-value" id="totalLoans">0</div><div class="stat-label">ØªØ¹Ø¯Ø§Ø¯ ÙˆØ§Ù…â€ŒÙ‡Ø§</div></div>
                <div class="stat-card"><div class="stat-value" id="upcomingCount">0</div><div class="stat-label">Ù‚Ø³Ø·â€ŒÙ‡Ø§ÛŒ Ù¾ÛŒØ´â€ŒØ±Ùˆ</div></div>
                <div class="stat-card"><div class="stat-value" id="totalRemaining">0</div><div class="stat-label">Ù…Ø¬Ù…ÙˆØ¹ Ù…Ø§Ù†Ø¯Ù‡ (ØªÙˆÙ…Ø§Ù†)</div></div>
                <div class="stat-card"><div class="stat-value" id="overdueCount">0</div><div class="stat-label">Ù‚Ø³Ø·â€ŒÙ‡Ø§ÛŒ Ù…Ø¹ÙˆÙ‚</div></div>
            </div>
        </div>
    </div>

    <div class="notification" id="notification"></div>

    <script>
        let loans = JSON.parse(localStorage.getItem('loans')) || [];

        const persianMonths = ['ÙØ±ÙˆØ±Ø¯ÛŒÙ†','Ø§Ø±Ø¯ÛŒØ¨Ù‡Ø´Øª','Ø®Ø±Ø¯Ø§Ø¯','ØªÛŒØ±','Ù…Ø±Ø¯Ø§Ø¯','Ø´Ù‡Ø±ÛŒÙˆØ±','Ù…Ù‡Ø±','Ø¢Ø¨Ø§Ù†','Ø¢Ø°Ø±','Ø¯ÛŒ','Ø¨Ù‡Ù…Ù†','Ø§Ø³ÙÙ†Ø¯'];

        function gregorianToJalali(gy, gm, gd) {
            let g_d_m = [0,31,59,90,120,151,181,212,243,273,304,334];
            let jy = (gy <= 1600) ? 0 : 979;
            gy -= (gy <= 1600) ? 621 : 1600;
            let gy2 = (gm > 2) ? (gy + 1) : gy;
            let days = 365*gy + parseInt((gy2+3)/4) - parseInt((gy2+99)/100) + parseInt((gy2+399)/400) - 80 + gd + g_d_m[gm-1];
            jy += 33*parseInt(days/12053);
            days %= 12053;
            jy += 4*parseInt(days/1461);
            days %= 1461;
            jy += parseInt((days-1)/365);
            if(days>365) days=(days-1)%365;
            let jm = (days<186) ? 1+parseInt(days/31) : 7+parseInt((days-186)/30);
            let jd = 1+((days<186)?(days%31):((days-186)%30));
            return [jy,jm,jd];
        }

        function getTodayPersianDate() {
            const today = new Date();
            const [jy,jm,jd] = gregorianToJalali(today.getFullYear(),today.getMonth()+1,today.getDate());
            return {year:jy, month:jm, day:jd, dateStr:`${jy}/${jm}/${jd}`};
        }

        function formatNumber(num) { return new Intl.NumberFormat('fa-IR').format(num); }
        function parseAmount(amountStr) { return parseInt(amountStr.replace(/[^\d]/g,'')) || 0; }

        function showNotification(message, type='success'){
            const notification = document.getElementById('notification');
            notification.textContent=message;
            notification.style.background = type==='success'?'#40c057':'#fa5252';
            notification.style.display='block';
            setTimeout(()=>{notification.style.display='none';},3000);
        }

        function isDateOverdue(year, month, day){
            const today=getTodayPersianDate();
            if(year<today.year) return true;
            if(year===today.year && month<today.month) return true;
            if(year===today.year && month===today.month && day<today.day) return true;
            return false;
        }

        function calculateInstallmentDates(day, remainingMonths){
            const dates=[]; const today=getTodayPersianDate();
            for(let i=0;i<remainingMonths;i++){
                let year=today.year, month=today.month+i;
                while(month>12){month-=12; year+=1;}
                const installmentDate={year, month, day, dateStr:`${year}/${month}/${day}`, displayDate:`${day} ${persianMonths[month-1]} ${year}`, isPaid:false, isOverdue:isDateOverdue(year,month,day)};
                dates.push(installmentDate);
            }
            return dates;
        }

        function addInstallment(){
            const nameInput=document.getElementById('installmentName');
            const monthlyInput=document.getElementById('installmentMonthly');
            const dayInput=document.getElementById('installmentDay');
            const monthsInput=document.getElementById('installmentMonths');

            const name=nameInput.value.trim();
            const monthlyAmount=parseAmount(monthlyInput.value);
            const day=parseInt(dayInput.value);
            const remainingMonths=parseInt(monthsInput.value);

            if(!name){showNotification('Ù„Ø·ÙØ§Ù‹ Ù†Ø§Ù… ÙˆØ§Ù… Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯','error'); return;}
            if(monthlyAmount<=0){showNotification('Ù„Ø·ÙØ§Ù‹ Ù…Ø¨Ù„Øº Ù‚Ø³Ø· Ù…Ø§Ù‡ÛŒØ§Ù†Ù‡ Ø±Ø§ Ø¨Ù‡ Ø¯Ø±Ø³ØªÛŒ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯','error'); return;}
            if(day<1||day>31){showNotification('Ø±ÙˆØ² Ø³Ø±Ø±Ø³ÛŒØ¯ Ø¨Ø§ÛŒØ¯ Ø¨ÛŒÙ† Û± ØªØ§ Û³Û± Ø¨Ø§Ø´Ø¯','error'); return;}
            if(remainingMonths<1||remainingMonths>120){showNotification('Ù…Ø§Ù‡â€ŒÙ‡Ø§ÛŒ Ù…Ø§Ù†Ø¯Ù‡ Ø¨Ø§ÛŒØ¯ Ø¨ÛŒÙ† Û± ØªØ§ Û±Û²Û° Ø¨Ø§Ø´Ø¯','error'); return;}

            const installmentDates=calculateInstallmentDates(day,remainingMonths);
            const totalRemainingAmount=monthlyAmount*remainingMonths;

            loans.push({id:Date.now(), name, monthlyAmount, totalRemainingAmount, day, remainingMonths, dates:installmentDates, createdAt:new Date().toISOString(), isActive:true});
            saveLoans(); renderLoans(); updateStats();

            nameInput.value=''; monthlyInput.value=''; dayInput.value=''; monthsInput.value='';
            showNotification('ÙˆØ§Ù… Ø¬Ø¯ÛŒØ¯ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯');
        }

        function deleteLoan(id){ if(confirm('Ø¢ÛŒØ§ Ø§Ø² Ø­Ø°Ù Ø§ÛŒÙ† ÙˆØ§Ù… Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ØŸ')){ loans=loans.filter(l=>l.id!==id); saveLoans(); renderLoans(); updateStats(); showNotification('ÙˆØ§Ù… Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø­Ø°Ù Ø´Ø¯'); } }

        function togglePayment(loanId,dateIndex,status){
            const loan=loans.find(l=>l.id===loanId);
            if(loan){ loan.dates[dateIndex].isPaid=status;
                const unpaidCount=loan.dates.filter(d=>!d.isPaid).length;
                loan.remainingMonths=unpaidCount; loan.totalRemainingAmount=loan.monthlyAmount*unpaidCount;
                loan.isActive=unpaidCount>0; saveLoans(); renderLoans(); updateStats();
                const action=status?'Ù¾Ø±Ø¯Ø§Ø®Øª Ø´Ø¯Ù‡':'Ù¾Ø±Ø¯Ø§Ø®Øª Ù†Ø´Ø¯';
                showNotification(`Ù‚Ø³Ø· Ø¨Ù‡ Ø¹Ù†ÙˆØ§Ù† ${action} Ø¹Ù„Ø§Ù…Øªâ€ŒÚ¯Ø°Ø§Ø±ÛŒ Ø´Ø¯`);
            }
        }

        function renderLoans(){
            const container=document.getElementById('installmentsContainer');
            if(loans.length===0){container.innerHTML=`<div class="empty-state"><i>ğŸ’³</i><h3>Ù‡ÛŒÚ† ÙˆØ§Ù…ÛŒ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª</h3><p>ÙˆØ§Ù… Ø§ÙˆÙ„ Ø®ÙˆØ¯ Ø±Ø§ Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†ÛŒØ¯ ØªØ§ Ø´Ø±ÙˆØ¹ Ú©Ù†ÛŒÙ…</p></div>`; return;}
            container.innerHTML='';
            loans.forEach(loan=>{
                const card=document.createElement('div'); card.className='loan-card';
                let installmentsHTML='';
                loan.dates.forEach((date,index)=>{
                    let rowClass='';
                    if(date.isPaid){rowClass='paid';} else if(date.isOverdue){rowClass='overdue';} else {rowClass='upcoming';}
                    installmentsHTML+=`<div class="installment-row ${rowClass}">
                        <div class="installment-date">${date.displayDate}</div>
                        <div class="installment-amount">${formatNumber(loan.monthlyAmount)} ØªÙˆÙ…Ø§Ù†</div>
                        <div class="payment-buttons">
                            <button class="pay-btn ${date.isPaid?'paid':'unpaid'}" onclick="togglePayment(${loan.id},${index},${!date.isPaid})">${date.isPaid?'âœ…':'âŒ'}</button>
                        </div>
                    </div>`;
                });
                card.innerHTML=`
                    <div class="loan-header">
                        <div class="loan-title">${loan.name}</div>
                        <div class="loan-amount">${formatNumber(loan.totalRemainingAmount)} ØªÙˆÙ…Ø§Ù†</div>
                    </div>
                    <div class="loan-details">
                        <div class="detail-item"><div class="detail-label">Ù‚Ø³Ø· Ù…Ø§Ù‡ÛŒØ§Ù†Ù‡</div><div class="detail-value">${formatNumber(loan.monthlyAmount)} ØªÙˆÙ…Ø§Ù†</div></div>
                        <div class="detail-item"><div class="detail-label">Ù…Ø§Ù‡â€ŒÙ‡Ø§ÛŒ Ù…Ø§Ù†Ø¯Ù‡</div><div class="detail-value">${loan.remainingMonths}</div></div>
                    </div>
                    <div class="installments-list">${installmentsHTML}</div>
                    <div class="loan-actions">
                        <span class="loan-status ${loan.isActive?'status-active':'status-completed'}">${loan.isActive?'ÙØ¹Ø§Ù„':'ØªÚ©Ù…ÛŒÙ„â€ŒØ´Ø¯Ù‡'}</span>
                        <button class="delete-btn" onclick="deleteLoan(${loan.id})">Ø­Ø°Ù ÙˆØ§Ù…</button>
                    </div>
                `;
                container.appendChild(card);
            });
        }

        function saveLoans(){localStorage.setItem('loans',JSON.stringify(loans));}

        function updateStats(){
            document.getElementById('totalLoans').textContent=loans.length;
            let upcoming=0, overdue=0, total=0;
            loans.forEach(l=>l.dates.forEach(d=>{if(!d.isPaid){total+=l.monthlyAmount; d.isOverdue?overdue++:upcoming++;}}));
            document.getElementById('upcomingCount').textContent=upcoming;
            document.getElementById('overdueCount').textContent=overdue;
            document.getElementById('totalRemaining').textContent=formatNumber(total);
        }

        function exportData(){
            const blob=new Blob([JSON.stringify(loans,null,2)],{type:'application/json'});
            const url=URL.createObjectURL(blob); const a=document.createElement('a');
            a.href=url; a.download='loans_data.json'; a.click(); URL.revokeObjectURL(url);
            showNotification('Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø®Ø±ÙˆØ¬ÛŒ Ú¯Ø±ÙØªÙ‡ Ø´Ø¯');
        }

        function importData(event){
            const file=event.target.files[0]; if(!file) return;
            const reader=new FileReader();
            reader.onload=function(e){try{loans=JSON.parse(e.target.result); saveLoans(); renderLoans(); updateStats(); showNotification('Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª ÙˆØ§Ø±Ø¯ Ø´Ø¯');}catch(err){showNotification('Ø®Ø·Ø§ Ø¯Ø± ÙˆØ§Ø±Ø¯ Ú©Ø±Ø¯Ù† ÙØ§ÛŒÙ„','error');}};
            reader.readAsText(file);
        }

        function clearAllData(){if(confirm('Ø¢ÛŒØ§ Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ Ú©Ù‡ Ù‡Ù…Ù‡ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ Ø­Ø°Ù Ø´ÙˆØ¯ØŸ')){loans=[]; saveLoans(); renderLoans(); updateStats(); showNotification('ØªÙ…Ø§Ù… Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ Ø­Ø°Ù Ø´Ø¯');}}

        function testNotification(){
            if("Notification" in window){
                if(Notification.permission==="default"){Notification.requestPermission().then(p=>{if(p==="granted") showTestNotification(); else showNotification('Ù…Ø¬ÙˆØ² Ù†ÙˆØªÛŒÙÛŒÚ©ÛŒØ´Ù† Ø¯Ø§Ø¯Ù‡ Ù†Ø´Ø¯','error');});}
                else if(Notification.permission==="granted"){showTestNotification();}
                else{showNotification('Ù…Ø¬ÙˆØ² Ù†ÙˆØªÛŒÙÛŒÚ©ÛŒØ´Ù† Ø¯Ø§Ø¯Ù‡ Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª','error');}
            }else{alert("Ù…Ø±ÙˆØ±Ú¯Ø± Ø´Ù…Ø§ Ø§Ø² Notification Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ù†Ù…ÛŒâ€ŒÚ©Ù†Ø¯");}
        }

        function showTestNotification(){
            new Notification("ØªØ³Øª ÛŒØ§Ø¯Ø¢ÙˆØ±",{body:"Ø§ÛŒÙ† ÛŒÚ© Ù†ÙˆØªÛŒÙÛŒÚ©ÛŒØ´Ù† Ø¢Ø²Ù…Ø§ÛŒØ´ÛŒ Ø§Ø³Øª",icon:"https://cdn-icons-png.flaticon.com/512/190/190411.png"});
            showNotification("Ù†ÙˆØªÛŒÙÛŒÚ©ÛŒØ´Ù† ØªØ³Øª Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯");
        }

        // Initial render
        renderLoans(); updateStats();
    </script>
</body>
</html>
